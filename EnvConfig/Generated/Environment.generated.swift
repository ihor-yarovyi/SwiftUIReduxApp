// This file is autogenerated. Do not modify!
// Generated by https://github.com/pgorzelany/SwiftConfiguration

import Foundation

public final class Environment {

    public enum Configuration: String, CaseIterable {
        case DebugDev = "DebugDev"
		case DebugProd = "DebugProd"
		case DebugStage = "DebugStage"
		case ReleaseDev = "ReleaseDev"
		case ReleaseProd = "ReleaseProd"
		case ReleaseStage = "ReleaseStage"
		
    }

    public enum ConfigurationKey: String, CaseIterable {
        case baseURLString
		
    }

    // MARK: Shared instance

    public static let current = Environment()

    // MARK: Properties

    private let configurationKey = "Environment.currentConfiguration"
    private let configurationPlistFileName = "Configuration.plist"
    private let activeConfigurationDictionary: NSDictionary
    public let activeConfiguration: Configuration

    public var baseURL: URL {
        guard let url = URL(string: Environment.current.baseURLString) else {
            fatalError("Base URL is not valid")
        }
        return url
    }
    
	var baseURLString: String {
		return value(for: .baseURLString)
	}

    // MARK: Lifecycle

    public init(targetConfiguration: Configuration? = nil) {
        let bundle = Bundle(for: Environment.self)
        guard let rawConfiguration = bundle.object(forInfoDictionaryKey: configurationKey) as? String,
            let configurationDictionaryPath = bundle.path(forResource: configurationPlistFileName, ofType: nil),
            let activeConfiguration = targetConfiguration ?? Configuration(rawValue: rawConfiguration),
            let configurationDictionary = NSDictionary(contentsOfFile: configurationDictionaryPath),
            let activeEnvironmentDictionary = configurationDictionary[activeConfiguration.rawValue] as? NSDictionary
            else {
                fatalError("Configuration Error")

        }
        self.activeConfiguration = activeConfiguration
        self.activeConfigurationDictionary = activeEnvironmentDictionary
    }

    // MARK: Methods

    public func value<T>(for key: ConfigurationKey) -> T {
        guard let value = activeConfigurationDictionary[key.rawValue] as? T else {
            fatalError("No value satysfying requirements")
        }
        return value
    }

    public func isRunning(in configuration: Configuration) -> Bool {
        return activeConfiguration == configuration
    }
}